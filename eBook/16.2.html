<h1><a href="#16-2-误用字符串" name="16-2-误用字符串"></a>16.2 误用字符串</h1>
<p>当需要对一个字符串进行频繁的操作时，谨记在go语言中字符串是不可变的（类似java和c#）。使用诸如<code>a += b</code>形式连接字符串效率低下，尤其在一个循环内部使用这种形式。这会导致大量的内存开销和拷贝。**应该使用一个字符数组代替字符串，将字符串内容写入一个缓存中。** 例如以下的代码示例：</p>
<pre><code class="go">var b bytes.Buffer
...
for condition {
    b.WriteString(str) // 将字符串str写入缓存buffer
}
    return b.String()
</code></pre>
<p>注意：由于编译优化和依赖于使用缓存操作的字符串大小，当循环次数大于15时，效率才会更佳。</p>
<h2><a href="#链接" name="链接"></a>链接</h2>
<ul>
  <li><a href="directory.html">目录</a></li>
  <li>上一节：<a href="16.1.html">误用短声明导致变量覆盖</a></li>
  <li>下一节：<a href="16.3.html">发生错误时使用defer关闭一个文件</a></li>
</ul>