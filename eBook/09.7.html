<h1><a href="#9-7-使用-go-install-安装自定义包" name="9-7-使用-go-install-安装自定义包"></a>9.7 使用 go install 安装自定义包</h1>
<p>go install 是 Go 中自动包安装工具：如需要将包安装到本地它会从远端仓库下载包：检出、编译和安装一气呵成。</p>
<p>在包安装前的先决条件是要自动处理包自身依赖关系的安装。被依赖的包也会安装到子目录下，但是没有文档和示例：可以到网上浏览。</p>
<p>go install 使用了 GOPATH 变量(详见第 2.2 节)。</p>
<p>远端包(详见第 9.5 节)：</p>
<p>假设我们要安装一个有趣的包 tideland（它包含了许多帮助示例，参见 <a href="http://code.google.com/p/tideland-cgl">项目主页</a>）。</p>
<p>因为我们需要创建目录在 Go 安装目录下，所以我们需要使用 root 或者 su 的身份执行命令。</p>
<p>确保 Go 环境变量已经设置在 root 用户下的 <code>./bashrc</code> 文件中。</p>
<p>使用命令安装：<code>go install tideland-cgl.googlecode.com/hg</code>。</p>
<p>可执行文件 <code>hg.a</code> 将被放到 <code>$GOROOT/pkg/linux_amd64/tideland-cgl.googlecode.com</code> 目录下，源码文件被放置在 <code>$GOROOT/src/tideland-cgl.googlecode.com/hg</code> 目录下，同样有个 <code>hg.a</code> 放置在 <code>_obj</code> 的子目录下。</p>
<p>现在就可以在 go 代码中使用这个包中的功能了，例如使用包名 cgl 导入：</p>
<pre><code class="go">import cgl &quot;tideland-cgl.googlecode.com/hg&quot;
</code></pre>
<p>从 Go1 起 go install 安装 Google Code 的导入路径形式是：<code>&quot;code.google.com/p/tideland-cgl&quot;</code></p>
<p>升级到新的版本：</p>
<p>更新到新版本的 Go 之后本地安装包的二进制文件将全被删除。如果你想更新，重编译、重安装所有的go安装包可以使用：<code>go install -a</code>。</p>
<p>go 的版本发布的很频繁，所以需要注意发布版本和包的兼容性。go1 之后都是自己编译自己了。</p>
<p>go install 同样可以使用 go install 编译链接并安装本地自己的包（详见第 9.8.2 节）。</p>
<p>更多信息可以在 <a href="http://golang.org/cmd/go/">官方网站</a> 找到。</p>
<h2><a href="#链接" name="链接"></a>链接</h2>
<ul>
  <li><a href="directory.html">目录</a></li>
  <li>上一节：<a href="09.6.html">为自定义包使用 godoc</a></li>
  <li>下一节：<a href="09.8.html">自定义包的目录结构、go install 和 go test</a></li>
</ul>