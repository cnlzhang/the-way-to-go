<h1><a href="#16-0-常见的陷阱与错误" name="16-0-常见的陷阱与错误"></a>16.0 常见的陷阱与错误</h1>
<p>在之前的内容中，有时候使用<code>!!...!!</code>标记警告go语言中的一些错误使用方式。当你在编程时候遇到的一个困难，可以确定本书特定的章节能找到类似的主题。为了方便起见，这里列出了一些常见陷阱，以便于你能发现更多的解释和例子：</p>
<ul>
  <li>永远不要使用形如 <code>var p*a</code> 声明变量，这会混淆指针声明和乘法运算（参考<a href="04.9.html">4.9小节</a>）</li>
  <li>永远不要在<code>for</code>循环自身中改变计数器变量（参考<a href="05.4.html">5.4小节</a>）</li>
  <li>永远不要在<code>for-range</code>循环中使用一个值去改变自身的值（参考<a href="05.4.html">5.4.4小节</a>）</li>
  <li>永远不要将<code>goto</code>和前置标签一起使用（参考<a href="05.6.html">5.6小节</a>）</li>
  <li>永远不要忘记在函数名（参考<a href="06.0.html">第6章</a>）后加括号()，尤其调用一个对象的方法或者使用匿名函数启动一个协程时</li>
  <li>永远不要使用<code>new()</code>一个map，一直使用make（参考<a href="08.0.html">第8章</a>）</li>
  <li>当为一个类型定义一个String()方法时，不要使用<code>fmt.Print</code>或者类似的代码（参考<a href="10.7.html">10.7小节</a>）</li>
  <li>永远不要忘记当终止缓存写入时，使用<code>Flush</code>函数（参考<a href="12.2.html">12.2.3小节</a>）</li>
  <li>永远不要忽略错误提示，忽略错误会导致程序崩溃（参考<a href="13.1.html">13.1小节</a>）</li>
  <li>不要使用全局变量或者共享内存，这会使并发执行的代码变得不安全（参考<a href="14.1.html">14.1小节</a>）</li>
  <li><code>println</code>函数仅仅是用于调试的目的</li>
</ul>
<p>最佳实践：对比以下使用方式：</p>
<ul>
  <li>使用正确的方式初始化一个元素是切片的映射，例如<code>map[type]slice</code>（参考<a href="08.1.html">8.1.3小节</a>）</li>
  <li>一直使用逗号，ok或者checked形式作为类型断言（参考<a href="11.3.html">11.3小节</a>）</li>
  <li>使用一个工厂函数创建并初始化自己定义类型（参考<a href="10.2.html">10.2小节</a>-<a href="18.4.html">18.4小节</a>）</li>
  <li>仅当一个结构体的方法想改变结构体时，使用结构体指针作为方法的接受者，否则使用一个结构体值类型<a href="10.6.html">10.6.3小节</a></li>
</ul>
<p>本章主要汇总了go语言使用过程中最常见的错误和注意事项。在之前的章节已经涉及到了完整的示例和解释，你应该做的不仅仅是阅读这段的标题。</p>
<h2><a href="#链接" name="链接"></a>链接</h2>
<ul>
  <li><a href="directory.html">目录</a></li>
  <li>上一章：<a href="15.12.html">使用SMTP（简单邮件传输协议）发送邮件</a></li>
  <li>下一节：<a href="16.1.html">误用短声明导致变量覆盖</a></li>
</ul>